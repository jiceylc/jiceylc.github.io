<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>需要证书及密码验证问题</title>
    <link href="/2024/07/21/SVN%E9%9C%80%E8%A6%81%E8%AF%81%E4%B9%A6%E5%8F%8A%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81%E9%97%AE%E9%A2%98/SVN%E9%9C%80%E8%A6%81%E8%AF%81%E4%B9%A6%E5%8F%8A%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81%E9%97%AE%E9%A2%98/"/>
    <url>/2024/07/21/SVN%E9%9C%80%E8%A6%81%E8%AF%81%E4%B9%A6%E5%8F%8A%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81%E9%97%AE%E9%A2%98/SVN%E9%9C%80%E8%A6%81%E8%AF%81%E4%B9%A6%E5%8F%8A%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="问题概览"><a href="#问题概览" class="headerlink" title="问题概览"></a>问题概览</h1><p><strong>问题一</strong><br>Ubuntu 20.04 下使用 SVN ，会报错 SVN 的证书错误，无论是选择接受 <code>t</code> 还是永久接受 <code>p</code>，下次都会要求再次接受；在 kali 或者 Windows 上没有出现该问题。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Error validating server certificate <span class="hljs-keyword">for</span> <span class="hljs-string">&#x27;https://xxx.xxx.xxx.xxx:443&#x27;</span>:<br> - The certificate has an unknown error.<br>Certificate information:<br></code></pre></td></tr></table></figure><p><strong>问题二</strong><br>环境同上，SVN 每次都要求输入密码，在 kali 或者 Windows 上没有出现该问题。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Authentication realm: &lt;https://xxx.xxx.xxx.xxx:443&gt; <span class="hljs-comment">#######xxxxx - silversvn##########</span><br>Password <span class="hljs-keyword">for</span> <span class="hljs-string">&#x27;xxx&#x27;</span>: ****************<br></code></pre></td></tr></table></figure><h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><h2 id="证书问题"><a href="#证书问题" class="headerlink" title="证书问题"></a>证书问题</h2><p>SVN 服务器的 TLS 版本为 V1.1，但是 Ubuntu 20.04 默认不再支持 TLS V1.0 和 V1.1</p><p>修改 Ubuntu 的配置 openssl 文件以启用 TLS V1.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@ubuntu:~# openssl version -d  <span class="hljs-comment"># 配置文件路径                                                    </span><br>OPENSSLDIR: <span class="hljs-string">&quot;/usr/lib/ssl&quot;</span>                                                                     <br>root@ubuntu:~# <span class="hljs-built_in">ls</span> /usr/lib/ssl                                                           <br>certs  misc  openssl.cnf  private  <span class="hljs-comment"># 修改openssl.cnf文件</span><br>root@ubuntu:~# vim /usr/lib/ssl/openssl.cnf<br><br><span class="hljs-comment"># 文件头添加</span><br>openssl_conf = default_conf  <br><br><span class="hljs-comment"># 文件末添加</span><br>[default_conf]<br>ssl_conf = ssl_sect<br>[ssl_sect]<br>system_default = ssl_default_sect<br>[ssl_default_sect]<br>MinProtocol = TLSv1<br>CipherString = DEFAULT:@SECLEVEL=1<br></code></pre></td></tr></table></figure><h2 id="输入密码"><a href="#输入密码" class="headerlink" title="输入密码"></a>输入密码</h2><p>ubuntu 20.04 的 SVN 默认版本为 1.13，不允许明文存储密码</p><h3 id="解决方法一"><a href="#解决方法一" class="headerlink" title="解决方法一"></a>解决方法一</h3><p>每次输入添加账户信息如 <code>svn up --username xxx --passwd xxx</code> 或对 svn 进行降级</p><h3 id="解决方法二"><a href="#解决方法二" class="headerlink" title="解决方法二"></a>解决方法二</h3><p>使用 gpg-agent 进行记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install gpg-agent<br><br>ps aux <br>... /usr/bin/gpg-agent --supervised<br></code></pre></td></tr></table></figure><p>设置环境变量，登录默认运行，全局配置可修改 &#x2F;etc&#x2F;profile，个人配置 ~&#x2F;.bashrc</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> GPG_TTY=$(<span class="hljs-built_in">tty</span>)<br></code></pre></td></tr></table></figure><p>svn 设置 </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># ~/.subversion/config</span><br><span class="hljs-attr">password-stores</span> = gpg-agent<br><br><span class="hljs-comment"># ~/.subversion/servers</span><br><span class="hljs-attr">store-passwords</span> = <span class="hljs-literal">yes</span><br></code></pre></td></tr></table></figure><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://zhuanlan.zhihu.com/p/543719863">Ubuntu 20.04 SVN报错</a><br><a href="https://blog.csdn.net/lanzhiwen/article/details/129090699">ubuntu svn 不支持明文保存密码 svn 保存密码</a><br><a href="https://www.coder.work/article/6855260">svn - 使用 GPG-Agent 的 Subversion HTTPS 密码缓存？ - IT工具网</a></p>]]></content>
    
    
    <categories>
      
      <category>环境配置</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>SVN</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
